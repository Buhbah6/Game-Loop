<div class="tutorial-detail-page">
  <!-- Loading State -->
  @if (loading) {
    <div class="container">
      <div class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading tutorial...</p>
      </div>
    </div>
  }

  <!-- Error State -->
  @if (error && !loading) {
    <div class="container">
      <div class="error-state">
        <h2>Tutorial Not Found</h2>
        <p>The tutorial you're looking for doesn't exist or couldn't be loaded.</p>
        <button routerLink="/tutorials" class="back-btn">Back to Tutorials</button>
      </div>
    </div>
  }

  <!-- Tutorial Content -->
  @if (tutorial && !loading && !error) {
    <div class="container">
      <!-- Tutorial Header -->
      <header class="tutorial-header">
        <div class="breadcrumb">
          <a routerLink="/tutorials" class="breadcrumb-link">Tutorials</a>
          <span class="breadcrumb-separator">‚Üí</span>
          <span class="breadcrumb-current">{{ tutorial.category }}</span>
        </div>
        
        <div class="tutorial-hero">
          <div class="tutorial-info">
            <div class="tutorial-meta">
              <span class="difficulty-badge" [style.background-color]="getDifficultyColor()">{{ tutorial.difficulty }}</span>
              <span class="category-badge">{{ tutorial.category }}</span>
            </div>
            
            <h1 class="tutorial-title">{{ tutorial.title }}</h1>
            <p class="tutorial-description">{{ tutorial.summary }}</p>
            
            <div class="tutorial-stats">
              <div class="stat-group">
                <span class="stat">
                  <span class="icon">üìÖ</span>
                  {{ getFormattedDate(tutorial.publishedAt || tutorial.createdAt) }}
                </span>
                <span class="stat">
                  <span class="icon">‚è±</span>
                  5 min read
                </span>
                <span class="stat">
                  <span class="icon">üëÅ</span>
                  1.2K views
                </span>
              </div>
              
              <div class="rating">
                <div class="stars">
                  @for (star of [1,2,3,4,5]; track star) {
                    <span class="star" [class.filled]="star <= 4.8">‚òÖ</span>
                  }
                </div>
                <span class="rating-text">4.8 (324 reviews)</span>
              </div>
            </div>
            
            <div class="instructor-info">
              <div class="instructor-avatar">
                <span class="avatar-text">GD</span>
              </div>
              <div class="instructor-details">
                <h3 class="instructor-name">Game Dev Expert</h3>
                <p class="instructor-bio">Professional game developer and educator</p>
              </div>
            </div>
          </div>
          
          <div class="tutorial-actions">
            <button class="primary-btn" (click)="startTutorial()">
              <span class="play-icon">‚ñ∂</span>
              Start Tutorial
            </button>
            
            <div class="secondary-actions">
              <button class="action-btn share-btn" (click)="shareTutorial()">
                <span class="icon">ÔøΩ</span>
                Share
              </button>
            </div>
          </div>
        </div>

        <!-- Cover Image -->
        @if (tutorial.coverImage?.url) {
          <div class="tutorial-cover-image">
            <img 
              [src]="getTutorialImageUrl(tutorial)" 
              [alt]="getTutorialImageAlt(tutorial)"
              class="cover-image" />
          </div>
        }
      </header>

      <!-- Tutorial Content -->
      <main class="tutorial-content">
        <div class="content-summary">
          <p class="summary-text">{{ tutorial.summary }}</p>
        </div>
        
        <div class="content-wrapper" [innerHTML]="tutorial.body"></div>
        
        <div class="tutorial-footer">
          <div class="tags">
            <span class="tag">{{ tutorial.category }}</span>
            <span class="tag">{{ tutorial.difficulty }}</span>
          </div>
        </div>
      </main>

      <!-- Related Tutorials -->
      @if (relatedTutorials.length > 0) {
        <section class="related-tutorials">
          <h2 class="section-title">Related Tutorials</h2>
          <div class="related-grid">
            @for (relatedTutorial of relatedTutorials; track relatedTutorial.id) {
              <article class="related-tutorial" (click)="navigateToTutorial(relatedTutorial)">
                @if (relatedTutorial.coverImage?.url) {
                  <div class="related-image">
                    <img 
                      [src]="getTutorialImageUrl(relatedTutorial)" 
                      [alt]="getTutorialImageAlt(relatedTutorial)"
                      loading="lazy" />
                  </div>
                } @else {
                  <div class="related-image-placeholder">
                    <span class="placeholder-icon">üéì</span>
                  </div>
                }
                <div class="related-content">
                  <h3 class="related-title">{{ relatedTutorial.title }}</h3>
                  <p class="related-summary">{{ relatedTutorial.summary }}</p>
                  <div class="related-meta">
                    <span class="related-category">{{ relatedTutorial.category }}</span>
                    <span class="related-difficulty">{{ relatedTutorial.difficulty }}</span>
                    <span class="related-date">{{ getFormattedDate(relatedTutorial.publishedAt || relatedTutorial.createdAt) }}</span>
                  </div>
                </div>
              </article>
            }
          </div>
        </section>
      }
    </div>
  }
</div>