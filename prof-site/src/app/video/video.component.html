<div class="video-detail-page">
  <!-- Loading State -->
  @if (loading) {
    <div class="container">
      <div class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading video...</p>
      </div>
    </div>
  }

  <!-- Error State -->
  @if (error && !loading) {
    <div class="container">
      <div class="error-state">
        <h2>Video Not Found</h2>
        <p>The video you're looking for doesn't exist or couldn't be loaded.</p>
        <button routerLink="/videos" class="back-btn">Back to Videos</button>
      </div>
    </div>
  }

  <!-- Video Content -->
  @if (video && !loading && !error) {
    <div class="container">
      <!-- Video Header -->
      <header class="video-header">
        <div class="breadcrumb">
          <a routerLink="/videos" class="breadcrumb-link">Videos</a>
          <span class="breadcrumb-separator">‚Üí</span>
          <span class="breadcrumb-current">{{ video.category }}</span>
        </div>
        
        <div class="video-hero">
          <div class="video-info">
            <div class="video-meta">
              <span class="category-badge">{{ video.category }}</span>
            </div>
            
            <h1 class="video-title">{{ video.title }}</h1>
            <p class="video-description">{{ video.summary }}</p>
            
            <div class="video-stats">
              <div class="stat-group">
                <span class="stat">
                  <span class="icon">üìÖ</span>
                  {{ getFormattedDate(video.publishedAt || video.createdAt) }}
                </span>
                <span class="stat">
                  <span class="icon">‚è±</span>
                  45:30 duration
                </span>
                <span class="stat">
                  <span class="icon">üëÅ</span>
                  125K views
                </span>
                <span class="stat">
                  <span class="icon">‚ù§Ô∏è</span>
                  8.2K likes
                </span>
              </div>
            </div>
            
            <div class="creator-info">
              <div class="creator-avatar">
                <span class="avatar-text">GD</span>
              </div>
              <div class="creator-details">
                <h3 class="creator-name">GameDev Academy</h3>
                <p class="creator-bio">Leading game development education channel</p>
              </div>
            </div>
          </div>

          <!-- Cover Image/Video Thumbnail -->
          @if (video.coverImage?.url) {
            <div class="video-thumbnail">
              <img 
                [src]="getVideoImageUrl(video)" 
                [alt]="getVideoImageAlt(video)"
                class="thumbnail-image" />
              <div class="play-overlay">
                <button class="play-button" (click)="togglePlayback()">
                  <span class="play-icon">‚ñ∂</span>
                </button>
              </div>
            </div>
          } @else {
            <div class="video-thumbnail-placeholder">
              <div class="play-overlay">
                <button class="play-button" (click)="togglePlayback()">
                  <span class="play-icon">‚ñ∂</span>
                </button>
              </div>
              <span class="placeholder-icon">üé•</span>
            </div>
          }
          
          <div class="video-actions">
            <button class="action-btn share-btn" (click)="shareVideo()">
              <span class="icon">üîó</span>
              Share
            </button>
          </div>
        </div>
      </header>

      <!-- Video Content -->
      <main class="video-content">
        <div class="content-summary">
          <p class="summary-text">{{ video.summary }}</p>
        </div>
        
        <div class="content-wrapper" [innerHTML]="video.body"></div>
        
        <div class="video-footer">
          <div class="tags">
            <span class="tag">{{ video.category }}</span>
            <span class="tag">Tutorial</span>
          </div>
        </div>
      </main>

      <!-- Related Videos -->
      @if (relatedVideos.length > 0) {
        <section class="related-videos">
          <h2 class="section-title">Related Videos</h2>
          <div class="related-grid">
            @for (relatedVideo of relatedVideos; track relatedVideo.id) {
              <article class="related-video" (click)="navigateToVideo(relatedVideo)">
                @if (relatedVideo.coverImage?.url) {
                  <div class="related-image">
                    <img 
                      [src]="getVideoImageUrl(relatedVideo)" 
                      [alt]="getVideoImageAlt(relatedVideo)"
                      loading="lazy" />
                    <div class="video-play-overlay">
                      <span class="play-icon-small">‚ñ∂</span>
                    </div>
                  </div>
                } @else {
                  <div class="related-image-placeholder">
                    <span class="placeholder-icon">üé•</span>
                    <div class="video-play-overlay">
                      <span class="play-icon-small">‚ñ∂</span>
                    </div>
                  </div>
                }
                <div class="related-content">
                  <h3 class="related-title">{{ relatedVideo.title }}</h3>
                  <p class="related-summary">{{ relatedVideo.summary }}</p>
                  <div class="related-meta">
                    <span class="related-category">{{ relatedVideo.category }}</span>
                    <span class="related-date">{{ getFormattedDate(relatedVideo.publishedAt || relatedVideo.createdAt) }}</span>
                  </div>
                </div>
              </article>
            }
          </div>
        </section>
      }
    </div>
  }
</div>